.w1ynm2aq{display:var(--w1ynm2aq-0);-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;padding-top:1rem;}
.fyalhd2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:row;-ms-flex-flow:row;flex-flow:row;}
.fa5yol7{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-flow:column;-ms-flex-flow:column;flex-flow:column;margin-right:2rem;}
/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkQ6XFxKYXJvZFxcV2VWb3RlXFxXZWJBcHBcXHNyY1xcanNcXGNvbXBvbmVudHNcXEZpbHRlclxcU2V0dGluZ3NBZGRCYWxsb3RJdGVtc0ZpbHRlci5qc3giXSwibmFtZXMiOlsiLncxeW5tMmFxIiwiLmZ5YWxoZDIiLCIuZmE1eW9sNyJdLCJtYXBwaW5ncyI6IkFBb2xCTUE7QUFNQUM7QUFLQUMiLCJmaWxlIjoiRDpcXEphcm9kXFxXZVZvdGVcXFdlYkFwcFxcc3JjXFxqc1xcY29tcG9uZW50c1xcRmlsdGVyXFxTZXR0aW5nc0FkZEJhbGxvdEl0ZW1zRmlsdGVyLmpzeCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyBDb21wb25lbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IHsgc3R5bGVkIH0gZnJvbSAnbGluYXJpYS9yZWFjdCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IEZvcm1Db250cm9sTGFiZWwgZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvRm9ybUNvbnRyb2xMYWJlbCc7XG5pbXBvcnQgeyB3aXRoU3R5bGVzIH0gZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvc3R5bGVzJztcbmltcG9ydCBSYWRpbyBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9SYWRpbyc7XG5pbXBvcnQgU2VsZWN0IGZyb20gJ0BtYXRlcmlhbC11aS9jb3JlL1NlbGVjdCc7XG5pbXBvcnQgQ2hpcCBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9DaGlwJztcbmltcG9ydCBJbnB1dCBmcm9tICdAbWF0ZXJpYWwtdWkvY29yZS9JbnB1dCc7XG5pbXBvcnQgTWVudUl0ZW0gZnJvbSAnQG1hdGVyaWFsLXVpL2NvcmUvTWVudUl0ZW0nO1xuaW1wb3J0IHsgYXJyYXlDb250YWlucywgcmVtb3ZlVmFsdWVGcm9tQXJyYXkgfSBmcm9tICcuLi8uLi91dGlscy90ZXh0Rm9ybWF0JztcbmltcG9ydCB7IGNvbnZlcnRTdGF0ZUNvZGVUb1N0YXRlVGV4dCwgY29udmVydFN0YXRlVGV4dFRvU3RhdGVDb2RlLCBzdGF0ZUNvZGVNYXAgfSBmcm9tICcuLi8uLi91dGlscy9hZGRyZXNzLWZ1bmN0aW9ucyc7XG5pbXBvcnQgQmFsbG90QWN0aW9ucyBmcm9tICcuLi8uLi9hY3Rpb25zL0JhbGxvdEFjdGlvbnMnO1xuaW1wb3J0IEJhbGxvdFN0b3JlIGZyb20gJy4uLy4uL3N0b3Jlcy9CYWxsb3RTdG9yZSc7XG5pbXBvcnQgeyByZW5kZXJMb2cgfSBmcm9tICcuLi8uLi91dGlscy9sb2dnaW5nJztcblxuY29uc3QgSVRFTV9IRUlHSFQgPSA0ODtcbmNvbnN0IElURU1fUEFERElOR19UT1AgPSA4O1xuY29uc3QgTWVudVByb3BzID0ge1xuICBQYXBlclByb3BzOiB7XG4gICAgc3R5bGU6IHtcbiAgICAgIG1heEhlaWdodDogSVRFTV9IRUlHSFQgKiA0LjUgKyBJVEVNX1BBRERJTkdfVE9QLFxuICAgICAgd2lkdGg6IDI1MCxcbiAgICB9LFxuICB9LFxufTtcblxuXG5jbGFzcyBTZXR0aW5nc0FkZEJhbGxvdEl0ZW1zRmlsdGVyIGV4dGVuZHMgQ29tcG9uZW50IHtcbiAgc3RhdGljIHByb3BUeXBlcyA9IHtcbiAgICAvLyBQYXNzZWQgaW4gdGhyb3VnaCBGaWx0ZXJCYXNlXG4gICAgYWxsSXRlbXM6IFByb3BUeXBlcy5hcnJheSxcbiAgICBjbGFzc2VzOiBQcm9wVHlwZXMub2JqZWN0LFxuICAgIGNoYW5nZVRyaWdnZXI6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgZm9yY2VDaGFuZ2VUcmlnZ2VyOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBsYXN0RmlsdGVyQWRkZWQ6IFByb3BUeXBlcy5zdHJpbmcsXG4gICAgb25GaWx0ZXJlZEl0ZW1zQ2hhbmdlOiBQcm9wVHlwZXMuZnVuYyxcbiAgICBvblNlbGVjdFNvcnRCeUZpbHRlcjogUHJvcFR5cGVzLmZ1bmMsXG4gICAgb25Ub2dnbGVGaWx0ZXI6IFByb3BUeXBlcy5mdW5jLFxuICAgIHNlbGVjdGVkRmlsdGVyczogUHJvcFR5cGVzLmFycmF5LFxuICAgIHNob3dBbGxGaWx0ZXJzOiBQcm9wVHlwZXMuYm9vbCxcbiAgICB1cGRhdGVTZWxlY3RlZEZpbHRlcnM6IFByb3BUeXBlcy5mdW5jLFxuICAgIC8vIFBhc3NlZCBpbiBkaXJlY3RseVxuICAgIGZpbHRlcnNQYXNzZWRJbk9uY2U6IFByb3BUeXBlcy5hcnJheSxcbiAgICBnb29nbGVDaXZpY0VsZWN0aW9uSWQ6IFByb3BUeXBlcy5udW1iZXIsXG4gIH07XG5cbiAgY29uc3RydWN0b3IgKHByb3BzKSB7XG4gICAgc3VwZXIocHJvcHMpO1xuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBhbGxCYWxsb3RJdGVtc0xhc3RTdGF0ZUNvZGVSZWNlaXZlZDogJycsXG4gICAgICBjb21wb25lbnREaWRNb3VudDogZmFsc2UsXG4gICAgICBmaWx0ZXJzQWxyZWFkeVBhc3NlZEluT25jZTogW10sXG4gICAgICBsb2NhbEFsbEJhbGxvdEl0ZW1zSGF2ZUJlZW5SZXRyaWV2ZWQ6IHt9LFxuICAgICAgc2VsZWN0ZWRTdGF0ZXM6IFtdLFxuICAgIH07XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCAoKSB7XG4gICAgY29uc3QgeyBzZWxlY3RlZEZpbHRlcnMgfSA9IHRoaXMucHJvcHM7XG4gICAgY29uc3QgeyBzZWxlY3RlZFN0YXRlcyB9ID0gdGhpcy5zdGF0ZTtcbiAgICBsZXQgc2VsZWN0ZWRTdGF0ZUZvdW5kID0gZmFsc2U7XG4gICAgY29uc3Qgc3RhdGVDb2RlTGlzdCA9IE9iamVjdC5rZXlzKHN0YXRlQ29kZU1hcCk7XG4gICAgLy8gY29uc29sZS5sb2coJ2NvbXBvbmVudERpZE1vdW50IHNlbGVjdGVkRmlsdGVyczonLCBzZWxlY3RlZEZpbHRlcnMpO1xuICAgIC8vIGNvbnNvbGUubG9nKCdjb21wb25lbnREaWRNb3VudCBzdGF0ZUNvZGVMaXN0OicsIHN0YXRlQ29kZUxpc3QpO1xuICAgIHNlbGVjdGVkRmlsdGVycy5mb3JFYWNoKChmaWx0ZXIpID0+IHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdjb21wb25lbnREaWRNb3VudCBmaWx0ZXI6JywgZmlsdGVyKTtcbiAgICAgIGlmIChhcnJheUNvbnRhaW5zKGZpbHRlciwgc3RhdGVDb2RlTGlzdCkpIHtcbiAgICAgICAgc2VsZWN0ZWRTdGF0ZXMucHVzaChmaWx0ZXIpO1xuICAgICAgICBzZWxlY3RlZFN0YXRlRm91bmQgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIGNvbnNvbGUubG9nKCdjb21wb25lbnREaWRNb3VudCBzZWxlY3RlZFN0YXRlczonLCBzZWxlY3RlZFN0YXRlcyk7XG4gICAgaWYgKHNlbGVjdGVkU3RhdGVGb3VuZCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHNlbGVjdGVkU3RhdGVzLFxuICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuYmFsbG90U3RvcmVMaXN0ZW5lciA9IEJhbGxvdFN0b3JlLmFkZExpc3RlbmVyKHRoaXMub25CYWxsb3RTdG9yZUNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgKG5leHRQcm9wcykge1xuICAgIGNvbnN0IHsgZmlsdGVyc0FscmVhZHlQYXNzZWRJbk9uY2UsIHNlbGVjdGVkU3RhdGVzIH0gPSB0aGlzLnN0YXRlO1xuICAgIGNvbnN0IHsgZmlsdGVyc1Bhc3NlZEluT25jZSwgc2VsZWN0ZWRGaWx0ZXJzIH0gPSBuZXh0UHJvcHM7XG4gICAgLy8gY29uc29sZS5sb2coJ2NvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgc2VsZWN0ZWRGaWx0ZXJzIGF0IHN0YXJ0OicsIHNlbGVjdGVkRmlsdGVycyk7XG4gICAgbGV0IG5ld0ZpbHRlclBhc3NlZEluID0gZmFsc2U7XG4gICAgZmlsdGVyc1Bhc3NlZEluT25jZS5mb3JFYWNoKChpbmNvbWluZ0ZpbHRlcikgPT4ge1xuICAgICAgaWYgKCFhcnJheUNvbnRhaW5zKGluY29taW5nRmlsdGVyLCBmaWx0ZXJzQWxyZWFkeVBhc3NlZEluT25jZSkpIHtcbiAgICAgICAgbmV3RmlsdGVyUGFzc2VkSW4gPSB0cnVlO1xuICAgICAgICBmaWx0ZXJzQWxyZWFkeVBhc3NlZEluT25jZS5wdXNoKGluY29taW5nRmlsdGVyKTtcbiAgICAgICAgaWYgKCFhcnJheUNvbnRhaW5zKGluY29taW5nRmlsdGVyLCBzZWxlY3RlZEZpbHRlcnMpKSB7XG4gICAgICAgICAgc2VsZWN0ZWRGaWx0ZXJzLnB1c2goaW5jb21pbmdGaWx0ZXIpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKG5ld0ZpbHRlclBhc3NlZEluKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnbmV3RmlsdGVyUGFzc2VkSW4gVFJVRSwgc2VsZWN0ZWRGaWx0ZXJzOicsIHNlbGVjdGVkRmlsdGVycyk7XG4gICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgZmlsdGVyc0FscmVhZHlQYXNzZWRJbk9uY2UsXG4gICAgICB9KTtcbiAgICAgIC8vIE5vdyBzZWUgaWYgYW55IG9mIHRoZXNlIG5lZWQgdG8gYmUgYWRkZWQgdG8gdGhlIHNlbGVjdGVkU3RhdGVzXG4gICAgICBsZXQgc2VsZWN0ZWRTdGF0ZUZvdW5kID0gZmFsc2U7XG4gICAgICBjb25zdCBzdGF0ZUNvZGVMaXN0ID0gT2JqZWN0LmtleXMoc3RhdGVDb2RlTWFwKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCdjb21wb25lbnREaWRNb3VudCBzdGF0ZUNvZGVMaXN0OicsIHN0YXRlQ29kZUxpc3QpO1xuICAgICAgc2VsZWN0ZWRGaWx0ZXJzLmZvckVhY2goKGZpbHRlcikgPT4ge1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnY29tcG9uZW50RGlkTW91bnQgZmlsdGVyOicsIGZpbHRlcik7XG4gICAgICAgIGlmIChhcnJheUNvbnRhaW5zKGZpbHRlciwgc3RhdGVDb2RlTGlzdCkgJiYgIWFycmF5Q29udGFpbnMoZmlsdGVyLCBzZWxlY3RlZFN0YXRlcykpIHtcbiAgICAgICAgICBzZWxlY3RlZFN0YXRlcy5wdXNoKGZpbHRlcik7XG4gICAgICAgICAgc2VsZWN0ZWRTdGF0ZUZvdW5kID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyBjb25zb2xlLmxvZygnY29tcG9uZW50RGlkTW91bnQgc2VsZWN0ZWRTdGF0ZXM6Jywgc2VsZWN0ZWRTdGF0ZXMpO1xuICAgICAgaWYgKHNlbGVjdGVkU3RhdGVGb3VuZCkge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBzZWxlY3RlZFN0YXRlcyxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBBbmQgZmluYWxseSwgZW5kIGJ5IHJlc2V0dGluZyBhbGwgZmlsdGVycyBpbiBGaWx0ZXJCYXNlIHdpdGggdGhlIHVwZGF0ZWQgc2V0XG4gICAgICB0aGlzLnByb3BzLnVwZGF0ZVNlbGVjdGVkRmlsdGVycyhzZWxlY3RlZEZpbHRlcnMpO1xuICAgIH1cbiAgfVxuXG4gIHNob3VsZENvbXBvbmVudFVwZGF0ZSAobmV4dFByb3BzLCBuZXh0U3RhdGUpIHtcbiAgICAvLyBUaGlzIGxpZmVjeWNsZSBtZXRob2QgdGVsbHMgdGhlIGNvbXBvbmVudCB0byBOT1QgcmVuZGVyIGlmIGNvbXBvbmVudFdpbGxSZWNlaXZlUHJvcHMgZGlkbid0IHNlZSBhbnkgY2hhbmdlc1xuICAgIGlmICh0aGlzLnN0YXRlLmFsbEJhbGxvdEl0ZW1zTGFzdFN0YXRlQ29kZVJlY2VpdmVkICE9PSBuZXh0U3RhdGUuYWxsQmFsbG90SXRlbXNMYXN0U3RhdGVDb2RlUmVjZWl2ZWQpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCd0aGlzLnN0YXRlLmFsbEJhbGxvdEl0ZW1zTGFzdFN0YXRlQ29kZVJlY2VpdmVkOicsIHRoaXMuc3RhdGUuYWxsQmFsbG90SXRlbXNMYXN0U3RhdGVDb2RlUmVjZWl2ZWQsICcsIG5leHRTdGF0ZS5hbGxCYWxsb3RJdGVtc0xhc3RTdGF0ZUNvZGVSZWNlaXZlZDonLCBuZXh0U3RhdGUuYWxsQmFsbG90SXRlbXNMYXN0U3RhdGVDb2RlUmVjZWl2ZWQpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh0aGlzLnN0YXRlLmNvbXBvbmVudERpZE1vdW50ICE9PSBuZXh0U3RhdGUuY29tcG9uZW50RGlkTW91bnQpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCd0aGlzLnN0YXRlLmNvbXBvbmVudERpZE1vdW50OicsIHRoaXMuc3RhdGUuY29tcG9uZW50RGlkTW91bnQsICcsIG5leHRTdGF0ZS5jb21wb25lbnREaWRNb3VudDonLCBuZXh0U3RhdGUuY29tcG9uZW50RGlkTW91bnQpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXRlLnNlbGVjdGVkU3RhdGVzKSAhPT0gSlNPTi5zdHJpbmdpZnkobmV4dFN0YXRlLnNlbGVjdGVkU3RhdGVzKSkge1xuICAgICAgLy8gY29uc29sZS5sb2coJ3RoaXMuc3RhdGUuc2VsZWN0ZWRTdGF0ZXM6JywgdGhpcy5zdGF0ZS5zZWxlY3RlZFN0YXRlcywgJywgbmV4dFN0YXRlLnNlbGVjdGVkU3RhdGVzOicsIG5leHRTdGF0ZS5zZWxlY3RlZFN0YXRlcyk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHRoaXMucHJvcHMuY2hhbmdlVHJpZ2dlciAhPT0gbmV4dFByb3BzLmNoYW5nZVRyaWdnZXIpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCd0aGlzLnByb3BzLmNoYW5nZVRyaWdnZXI6JywgdGhpcy5wcm9wcy5jaGFuZ2VUcmlnZ2VyLCAnLCBuZXh0UHJvcHMuY2hhbmdlVHJpZ2dlcjonLCBuZXh0UHJvcHMuY2hhbmdlVHJpZ2dlcik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHRoaXMucHJvcHMubGFzdEZpbHRlckFkZGVkICE9PSBuZXh0UHJvcHMubGFzdEZpbHRlckFkZGVkKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygndGhpcy5wcm9wcy5sYXN0RmlsdGVyQWRkZWQ6JywgdGhpcy5wcm9wcy5sYXN0RmlsdGVyQWRkZWQsICcsIG5leHRQcm9wcy5sYXN0RmlsdGVyQWRkZWQ6JywgbmV4dFByb3BzLmxhc3RGaWx0ZXJBZGRlZCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHRoaXMucHJvcHMuc2hvd0FsbEZpbHRlcnMgIT09IG5leHRQcm9wcy5zaG93QWxsRmlsdGVycykge1xuICAgICAgLy8gY29uc29sZS5sb2coJ3RoaXMucHJvcHMuc2hvd0FsbEZpbHRlcnM6JywgdGhpcy5wcm9wcy5zaG93QWxsRmlsdGVycywgJywgbmV4dFByb3BzLnNob3dBbGxGaWx0ZXJzOicsIG5leHRQcm9wcy5zaG93QWxsRmlsdGVycyk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KHRoaXMucHJvcHMuc2VsZWN0ZWRGaWx0ZXJzKSAhPT0gSlNPTi5zdHJpbmdpZnkobmV4dFByb3BzLnNlbGVjdGVkRmlsdGVycykpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCd0aGlzLnByb3BzLnNlbGVjdGVkRmlsdGVyczonLCB0aGlzLnByb3BzLnNlbGVjdGVkRmlsdGVycywgJywgbmV4dFByb3BzLnNlbGVjdGVkRmlsdGVyczonLCBuZXh0UHJvcHMuc2VsZWN0ZWRGaWx0ZXJzKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBjb25zb2xlLmxvZygnc2hvdWxkQ29tcG9uZW50VXBkYXRlIG5vIGNoYW5nZScpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNvbXBvbmVudERpZFVwZGF0ZSAocHJldlByb3BzLCBwcmV2U3RhdGUpIHtcbiAgICAvLyBjb25zb2xlLmxvZygnU2V0dGluZ3NBZGRCYWxsb3RJdGVtc0ZpbHRlciBjb21wb25lbnREaWRVcGRhdGUnKTtcbiAgICAvLyBjb25zb2xlLmxvZygncHJldlByb3BzLnNlbGVjdGVkRmlsdGVyczonLCBwcmV2UHJvcHMuc2VsZWN0ZWRGaWx0ZXJzLCAnLCB0aGlzLnByb3BzLnNlbGVjdGVkRmlsdGVyczonLCB0aGlzLnByb3BzLnNlbGVjdGVkRmlsdGVycyk7XG4gICAgLy8gY29uc29sZS5sb2coJ3ByZXZQcm9wcy5zZWxlY3RlZEZpbHRlcnMtc3RyaW5naWZ5OicsIEpTT04uc3RyaW5naWZ5KHByZXZQcm9wcy5zZWxlY3RlZEZpbHRlcnMpLCAnLCB0aGlzLnByb3BzLnNlbGVjdGVkRmlsdGVycy1zdHJpbmdpZnk6JywgSlNPTi5zdHJpbmdpZnkodGhpcy5wcm9wcy5zZWxlY3RlZEZpbHRlcnMpKTtcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkocHJldlByb3BzLnNlbGVjdGVkRmlsdGVycykgIT09IEpTT04uc3RyaW5naWZ5KHRoaXMucHJvcHMuc2VsZWN0ZWRGaWx0ZXJzKSkge1xuICAgICAgLy8gY29uc29sZS5sb2coJysrK1NldHRpbmdzQWRkQmFsbG90SXRlbXNGaWx0ZXIgY29tcG9uZW50RGlkVXBkYXRlLCBjaGFuZ2UgdG8gc2VsZWN0ZWRGaWx0ZXJzJyk7XG4gICAgICBjb25zdCBuZXdGaWx0ZXJlZEl0ZW1zID0gdGhpcy5nZXROZXdGaWx0ZXJlZEl0ZW1zKCk7XG4gICAgICB0aGlzLnByb3BzLm9uRmlsdGVyZWRJdGVtc0NoYW5nZShuZXdGaWx0ZXJlZEl0ZW1zLCB0aGlzLnByb3BzLnNlbGVjdGVkRmlsdGVycyk7XG4gICAgfSBlbHNlIGlmICgocHJldlN0YXRlLmFsbEJhbGxvdEl0ZW1zTGFzdFN0YXRlQ29kZVJlY2VpdmVkICE9PSB0aGlzLnN0YXRlLmFsbEJhbGxvdEl0ZW1zTGFzdFN0YXRlQ29kZVJlY2VpdmVkKSB8fCAocHJldlByb3BzLmNoYW5nZVRyaWdnZXIgIT09IHRoaXMucHJvcHMuY2hhbmdlVHJpZ2dlcikpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCcrKytjb21wb25lbnREaWRVcGRhdGUsIGNoYW5nZSB0byBhbGxCYWxsb3RJdGVtc0xhc3RTdGF0ZUNvZGVSZWNlaXZlZDonLCB0aGlzLnN0YXRlLmFsbEJhbGxvdEl0ZW1zTGFzdFN0YXRlQ29kZVJlY2VpdmVkLCAnLCBvciBjaGFuZ2VUcmlnZ2VyOicsIHRoaXMucHJvcHMuY2hhbmdlVHJpZ2dlcik7XG4gICAgICBjb25zdCBuZXdGaWx0ZXJlZEl0ZW1zID0gdGhpcy5nZXROZXdGaWx0ZXJlZEl0ZW1zKCk7XG4gICAgICB0aGlzLnByb3BzLm9uRmlsdGVyZWRJdGVtc0NoYW5nZShuZXdGaWx0ZXJlZEl0ZW1zLCB0aGlzLnByb3BzLnNlbGVjdGVkRmlsdGVycyk7XG4gICAgICB0aGlzLnByb3BzLmZvcmNlQ2hhbmdlVHJpZ2dlcih0aGlzLnN0YXRlLmFsbEJhbGxvdEl0ZW1zTGFzdFN0YXRlQ29kZVJlY2VpdmVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gY29uc29sZS5sb2coJy0tLVNldHRpbmdzQWRkQmFsbG90SXRlbXNGaWx0ZXIgY29tcG9uZW50RGlkVXBkYXRlLCBubyBjaGFuZ2UgdG8gc2VsZWN0ZWRGaWx0ZXJzJyk7XG4gICAgfVxuICAgIC8vIElmIGEgc3RhdGVDb2RlIGhhcyBiZWVuIGFkZGVkIHRoYXQgaGFzbid0IGJlZW4gcmV0cmlldmVkIGZyb20gdGhlIEFQSSBzZXJ2ZXIsIHJldHJpZXZlIGl0IG5vd1xuICAgIGNvbnN0IHsgZ29vZ2xlQ2l2aWNFbGVjdGlvbklkIH0gPSB0aGlzLnByb3BzO1xuICAgIGxldCB7IHNlbGVjdGVkRmlsdGVycyB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7IGxvY2FsQWxsQmFsbG90SXRlbXNIYXZlQmVlblJldHJpZXZlZCwgc2VsZWN0ZWRTdGF0ZXM6IG5ld1NlbGVjdGVkU3RhdGVzIH0gPSB0aGlzLnN0YXRlO1xuICAgIGlmIChnb29nbGVDaXZpY0VsZWN0aW9uSWQgJiYgSlNPTi5zdHJpbmdpZnkocHJldlN0YXRlLnNlbGVjdGVkU3RhdGVzKSAhPT0gSlNPTi5zdHJpbmdpZnkobmV3U2VsZWN0ZWRTdGF0ZXMpKSB7XG4gICAgICAvLyBjb25zb2xlLmxvZygnY29tcG9uZW50RGlkVXBkYXRlIGNoYW5nZSBpbiBzZWxlY3RlZFN0YXRlcyBmb3VuZCcpO1xuICAgICAgLy8gRmluZCBuZXcgc3RhdGVzIGp1c3QgYWRkZWRcbiAgICAgIHRoaXMuc3RhdGUuc2VsZWN0ZWRTdGF0ZXMuZm9yRWFjaCgoc3RhdGVDb2RlVG9SZXRyaWV2ZSkgPT4ge1xuICAgICAgICAvLyBJcyB0aGVyZSBhIHN0YXRlIGluIHRoaXMgbGlzdCB0aGF0IGlzIE5PVCBpbiB0aGUgcHJldmlvdXMgbGlzdD9cbiAgICAgICAgaWYgKCFhcnJheUNvbnRhaW5zKHN0YXRlQ29kZVRvUmV0cmlldmUsIHByZXZTdGF0ZS5zZWxlY3RlZFN0YXRlcykpIHtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnTmV3IHN0YXRlQ29kZSBmb3VuZDonLCBzdGF0ZUNvZGVUb1JldHJpZXZlKTtcbiAgICAgICAgICBpZiAoIWxvY2FsQWxsQmFsbG90SXRlbXNIYXZlQmVlblJldHJpZXZlZFtnb29nbGVDaXZpY0VsZWN0aW9uSWRdKSB7XG4gICAgICAgICAgICBsb2NhbEFsbEJhbGxvdEl0ZW1zSGF2ZUJlZW5SZXRyaWV2ZWRbZ29vZ2xlQ2l2aWNFbGVjdGlvbklkXSA9IHt9O1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIWxvY2FsQWxsQmFsbG90SXRlbXNIYXZlQmVlblJldHJpZXZlZFtnb29nbGVDaXZpY0VsZWN0aW9uSWRdW3N0YXRlQ29kZVRvUmV0cmlldmVdKSB7XG4gICAgICAgICAgICBsb2NhbEFsbEJhbGxvdEl0ZW1zSGF2ZUJlZW5SZXRyaWV2ZWRbZ29vZ2xlQ2l2aWNFbGVjdGlvbklkXVtzdGF0ZUNvZGVUb1JldHJpZXZlXSA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBkb05vdFJldHJpZXZlQWxsQmFsbG90SXRlbXMgPSBsb2NhbEFsbEJhbGxvdEl0ZW1zSGF2ZUJlZW5SZXRyaWV2ZWRbZ29vZ2xlQ2l2aWNFbGVjdGlvbklkXVtzdGF0ZUNvZGVUb1JldHJpZXZlXSB8fCBCYWxsb3RTdG9yZS5hbGxCYWxsb3RJdGVtc0hhdmVCZWVuUmV0cmlldmVkRm9yRWxlY3Rpb24oZ29vZ2xlQ2l2aWNFbGVjdGlvbklkLCBzdGF0ZUNvZGVUb1JldHJpZXZlKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnZG9Ob3RSZXRyaWV2ZUFsbEJhbGxvdEl0ZW1zOicsIGRvTm90UmV0cmlldmVBbGxCYWxsb3RJdGVtcyk7XG4gICAgICAgICAgaWYgKCFkb05vdFJldHJpZXZlQWxsQmFsbG90SXRlbXMpIHtcbiAgICAgICAgICAgIGxvY2FsQWxsQmFsbG90SXRlbXNIYXZlQmVlblJldHJpZXZlZFtnb29nbGVDaXZpY0VsZWN0aW9uSWRdW3N0YXRlQ29kZVRvUmV0cmlldmVdID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgICAgICBsb2NhbEFsbEJhbGxvdEl0ZW1zSGF2ZUJlZW5SZXRyaWV2ZWQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIEJhbGxvdEFjdGlvbnMuYWxsQmFsbG90SXRlbXNSZXRyaWV2ZShnb29nbGVDaXZpY0VsZWN0aW9uSWQsIHN0YXRlQ29kZVRvUmV0cmlldmUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBsZXQgc3RhdGVDb2RlUmVtb3ZlZCA9IGZhbHNlO1xuICAgICAgcHJldlN0YXRlLnNlbGVjdGVkU3RhdGVzLmZvckVhY2goKHN0YXRlQ29kZSkgPT4ge1xuICAgICAgICAvLyBJcyB0aGVyZSBhIHN0YXRlIGluIHRoZSBwcmV2aW91cyBzZWxlY3RlZFN0YXRlcyB0aGF0IGlzIG5vdCBpbiB0aGUgY3VycmVudCBsaXN0PyBJZiBzbywgdHJpZ2dlciByZS1yZW5kZXJcbiAgICAgICAgaWYgKCFhcnJheUNvbnRhaW5zKHN0YXRlQ29kZSwgbmV3U2VsZWN0ZWRTdGF0ZXMpKSB7XG4gICAgICAgICAgLy8gY29uc29sZS5sb2coJ3N0YXRlQ29kZVJlbW92ZWQ6ICcsIHN0YXRlQ29kZVJlbW92ZWQsICcsIHN0YXRlQ29kZTonLCBzdGF0ZUNvZGUpO1xuICAgICAgICAgIHNlbGVjdGVkRmlsdGVycyA9IHJlbW92ZVZhbHVlRnJvbUFycmF5KHNlbGVjdGVkRmlsdGVycywgc3RhdGVDb2RlKTtcbiAgICAgICAgICAvLyBjb25zb2xlLmxvZygnVXBkYXRlZCBzZWxlY3RlZEZpbHRlcnM6Jywgc2VsZWN0ZWRGaWx0ZXJzKTtcbiAgICAgICAgICBzdGF0ZUNvZGVSZW1vdmVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBpZiAoc3RhdGVDb2RlUmVtb3ZlZCkge1xuICAgICAgICB0aGlzLnByb3BzLnVwZGF0ZVNlbGVjdGVkRmlsdGVycyhzZWxlY3RlZEZpbHRlcnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGNvbXBvbmVudFdpbGxVbm1vdW50ICgpIHtcbiAgICB0aGlzLmJhbGxvdFN0b3JlTGlzdGVuZXIucmVtb3ZlKCk7XG4gIH1cblxuICBvbkJhbGxvdFN0b3JlQ2hhbmdlICgpIHtcbiAgICBjb25zdCBhbGxCYWxsb3RJdGVtc0xhc3RTdGF0ZUNvZGVSZWNlaXZlZCA9IEJhbGxvdFN0b3JlLmdldEFsbEJhbGxvdEl0ZW1zTGFzdFN0YXRlQ29kZVJlY2VpdmVkO1xuICAgIC8vIGNvbnNvbGUubG9nKCdvbkJhbGxvdFN0b3JlQ2hhbmdlIGFsbEJhbGxvdEl0ZW1zTGFzdFN0YXRlQ29kZVJlY2VpdmVkOicsIGFsbEJhbGxvdEl0ZW1zTGFzdFN0YXRlQ29kZVJlY2VpdmVkKTtcbiAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgIGFsbEJhbGxvdEl0ZW1zTGFzdFN0YXRlQ29kZVJlY2VpdmVkLFxuICAgIH0pO1xuICB9XG5cbiAgZ2V0RmlsdGVyZWRJdGVtc0J5TGlua2VkSXNzdWUgPSAoaXNzdWVGaWx0ZXIpID0+IHtcbiAgICBjb25zdCB7IGFsbEl0ZW1zIH0gPSB0aGlzLnByb3BzO1xuICAgIHJldHVybiBhbGxJdGVtcy5maWx0ZXIoaXRlbSA9PiBpdGVtLmlzc3VlX3dlX3ZvdGVfaWRzX2xpbmtlZCA9PT0gaXNzdWVGaWx0ZXIuaXNzdWVfd2Vfdm90ZV9pZCk7XG4gIH07XG5cbiAgb3JkZXJCeUZvbGxvd2VkT3Jnc0ZpcnN0ID0gKGZpcnN0R3VpZGUsIHNlY29uZEd1aWRlKSA9PiBzZWNvbmRHdWlkZS5mb2xsb3dlZCAtIGZpcnN0R3VpZGUuZm9sbG93ZWQ7XG5cbiAgb3JkZXJCeVR3aXR0ZXJGb2xsb3dlcnMgPSAoZmlyc3RHdWlkZSwgc2Vjb25kR3VpZGUpID0+IHNlY29uZEd1aWRlLnR3aXR0ZXJfZm9sbG93ZXJzX2NvdW50IC0gZmlyc3RHdWlkZS50d2l0dGVyX2ZvbGxvd2Vyc19jb3VudDtcblxuICBvcmRlckJ5V3JpdHRlbkNvbW1lbnQgPSAoZmlyc3RHdWlkZSwgc2Vjb25kR3VpZGUpID0+IHtcbiAgICBjb25zdCBzZWNvbmRHdWlkZUhhc1N0YXRlbWVudCA9IHNlY29uZEd1aWRlICYmIHNlY29uZEd1aWRlLnN0YXRlbWVudF90ZXh0ICYmIHNlY29uZEd1aWRlLnN0YXRlbWVudF90ZXh0Lmxlbmd0aCA/IDEgOiAwO1xuICAgIGNvbnN0IGZpcnN0R3VpZGVIYXNTdGF0ZW1lbnQgPSBmaXJzdEd1aWRlICYmIGZpcnN0R3VpZGUuc3RhdGVtZW50X3RleHQgJiYgZmlyc3RHdWlkZS5zdGF0ZW1lbnRfdGV4dC5sZW5ndGggPyAxIDogMDtcbiAgICByZXR1cm4gc2Vjb25kR3VpZGVIYXNTdGF0ZW1lbnQgLSBmaXJzdEd1aWRlSGFzU3RhdGVtZW50O1xuICB9O1xuXG4gIGdldE5ld0ZpbHRlcmVkSXRlbXMgPSAoKSA9PiB7XG4gICAgY29uc3QgeyBhbGxJdGVtcywgbGFzdEZpbHRlckFkZGVkIH0gPSB0aGlzLnByb3BzO1xuICAgIGxldCB7IHNlbGVjdGVkRmlsdGVycyB9ID0gdGhpcy5wcm9wcztcbiAgICBpZiAoIXNlbGVjdGVkRmlsdGVycyB8fCAhc2VsZWN0ZWRGaWx0ZXJzLmxlbmd0aCkge1xuICAgICAgLy8gV2UgYWx3YXlzIHdhbnQgdG8gbWFrZSBzdXJlIHRoZXJlIGlzIGF0IGxlYXN0IG9uIHJhY2UgZmlsdGVyIG9uXG4gICAgICBzZWxlY3RlZEZpbHRlcnMgPSBbJ3Nob3dGZWRlcmFsUmFjZUZpbHRlciddO1xuICAgICAgdGhpcy50b2dnbGVGaWx0ZXIoJ3Nob3dGZWRlcmFsUmFjZUZpbHRlcicpO1xuICAgICAgLy8gY29uc29sZS5sb2coJ0V4aXRpbmcgZ2V0TmV3RmlsdGVyZWRJdGVtcyAoMSknKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgbGV0IGZpbHRlcmVkSXRlbXMgPSBhbGxJdGVtczsgLy8gU3RhcnQgd2l0aCBhbGwgaXRlbXNcblxuICAgIC8vIFJlbW92ZSBhbGwgQ2FuZGlkYXRlc1xuICAgIGxldCBmaWx0ZXJJdGVtc1NuYXBzaG90ID0gZmlsdGVyZWRJdGVtcztcbiAgICBmaWx0ZXJlZEl0ZW1zID0gW107XG4gICAgZmlsdGVyZWRJdGVtcyA9IFsuLi5maWx0ZXJlZEl0ZW1zLCAuLi5maWx0ZXJJdGVtc1NuYXBzaG90LmZpbHRlcihpdGVtID0+IGl0ZW0ua2luZF9vZl9iYWxsb3RfaXRlbSAhPT0gJ0NBTkRJREFURScpXTtcblxuICAgIC8vIFJlbW92ZSBzdGF0ZXMgdGhhdCBhcmVuJ3QgaW4gdGhlIHNlbGVjdGVkRmlsdGVycz9cbiAgICBjb25zdCBzdGF0ZUNvZGVMaXN0ID0gT2JqZWN0LmtleXMoc3RhdGVDb2RlTWFwKTtcbiAgICBjb25zdCBzdGF0ZUNvZGVzU2VsZWN0ZWQgPSBbJ25hJywgJyddO1xuICAgIHNlbGVjdGVkRmlsdGVycy5mb3JFYWNoKChmaWx0ZXIpID0+IHtcbiAgICAgIGlmIChhcnJheUNvbnRhaW5zKGZpbHRlciwgc3RhdGVDb2RlTGlzdCkpIHtcbiAgICAgICAgc3RhdGVDb2Rlc1NlbGVjdGVkLnB1c2goZmlsdGVyLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIGNvbnNvbGUubG9nKCdzdGF0ZUNvZGVzU2VsZWN0ZWQ6Jywgc3RhdGVDb2Rlc1NlbGVjdGVkKTtcbiAgICAvLyBjb25zb2xlLmxvZygnZmlsdGVyZWRJdGVtczonLCBmaWx0ZXJlZEl0ZW1zKTtcbiAgICBpZiAoc3RhdGVDb2Rlc1NlbGVjdGVkLmxlbmd0aCkge1xuICAgICAgZmlsdGVySXRlbXNTbmFwc2hvdCA9IGZpbHRlcmVkSXRlbXM7XG4gICAgICBmaWx0ZXJlZEl0ZW1zID0gW107XG4gICAgICBmaWx0ZXJlZEl0ZW1zID0gWy4uLmZpbHRlcmVkSXRlbXMsIC4uLmZpbHRlckl0ZW1zU25hcHNob3QuZmlsdGVyKGl0ZW0gPT4gYXJyYXlDb250YWlucyhpdGVtLnN0YXRlX2NvZGUsIHN0YXRlQ29kZXNTZWxlY3RlZCkpXTtcbiAgICB9XG5cbiAgICAvLyBXaGljaCBzaG93RmVkZXJhbFJhY2VGaWx0ZXIvc2hvd09wcG9zZUZpbHRlci9zaG93Q29tbWVudEZpbHRlciB0byBzaG93P1xuICAgIC8vIE1ha2Ugc3VyZSBvbmUgb2YgdGhlbSBpcyBjaG9zZW4uIElmIG5vdCwgZG8gbm90IGxpbWl0IGJ5IHJhY2UgbGV2ZWxcbiAgICBsZXQgY29udGFpbnNBdExlYXN0T25lUmFjZUZpbHRlciA9IGZhbHNlO1xuICAgIGxldCByYWNlRmlsdGVyQ291bnQgPSAwO1xuICAgIGNvbnN0IGZpbHRlcnNUb1JlbW92ZSA9IFtdOyAvLyBXZSBvbmx5IHdhbnQgdG8gc3VwcG9ydCBvbmUgcmFjZSBmaWx0ZXIgYXQgYSB0aW1lXG4gICAgLy8gY29uc29sZS5sb2coJ1NldHRpbmdzQWRkQmFsbG90SXRlbXNGaWx0ZXIgbGFzdEZpbHRlckFkZGVkOicsIGxhc3RGaWx0ZXJBZGRlZCk7XG4gICAgc2VsZWN0ZWRGaWx0ZXJzLmZvckVhY2goKGZpbHRlcikgPT4ge1xuICAgICAgLy8gY29uc29sZS5sb2coJ1NldHRpbmdzQWRkQmFsbG90SXRlbXNGaWx0ZXIgZmlsdGVyOicsIGZpbHRlcik7XG4gICAgICBzd2l0Y2ggKGZpbHRlcikge1xuICAgICAgICBjYXNlICdzaG93RmVkZXJhbFJhY2VGaWx0ZXInOlxuICAgICAgICAgIGNvbnRhaW5zQXRMZWFzdE9uZVJhY2VGaWx0ZXIgPSB0cnVlO1xuICAgICAgICAgIGlmIChsYXN0RmlsdGVyQWRkZWQgJiYgIV8uaXNFcXVhbChsYXN0RmlsdGVyQWRkZWQsICdzaG93RmVkZXJhbFJhY2VGaWx0ZXInKSkge1xuICAgICAgICAgICAgLy8gT25seSBhZGQgdG8gZmlsdGVyc1RvUmVtb3ZlIGlmIGl0IHdhc24ndCB0aGUgbGFzdCByYWNlIGZpbHRlciBzZWxlY3RlZFxuICAgICAgICAgICAgcmFjZUZpbHRlckNvdW50ICs9IDE7XG4gICAgICAgICAgICBmaWx0ZXJzVG9SZW1vdmUucHVzaCgnc2hvd0ZlZGVyYWxSYWNlRmlsdGVyJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzaG93U3RhdGVSYWNlRmlsdGVyJzpcbiAgICAgICAgICBjb250YWluc0F0TGVhc3RPbmVSYWNlRmlsdGVyID0gdHJ1ZTtcbiAgICAgICAgICByYWNlRmlsdGVyQ291bnQgKz0gMTtcbiAgICAgICAgICBpZiAobGFzdEZpbHRlckFkZGVkICYmICFfLmlzRXF1YWwobGFzdEZpbHRlckFkZGVkLCAnc2hvd1N0YXRlUmFjZUZpbHRlcicpKSB7XG4gICAgICAgICAgICByYWNlRmlsdGVyQ291bnQgKz0gMTtcbiAgICAgICAgICAgIGZpbHRlcnNUb1JlbW92ZS5wdXNoKCdzaG93U3RhdGVSYWNlRmlsdGVyJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzaG93TWVhc3VyZVJhY2VGaWx0ZXInOlxuICAgICAgICAgIGNvbnRhaW5zQXRMZWFzdE9uZVJhY2VGaWx0ZXIgPSB0cnVlO1xuICAgICAgICAgIHJhY2VGaWx0ZXJDb3VudCArPSAxO1xuICAgICAgICAgIGlmIChsYXN0RmlsdGVyQWRkZWQgJiYgIV8uaXNFcXVhbChsYXN0RmlsdGVyQWRkZWQsICdzaG93TWVhc3VyZVJhY2VGaWx0ZXInKSkge1xuICAgICAgICAgICAgcmFjZUZpbHRlckNvdW50ICs9IDE7XG4gICAgICAgICAgICBmaWx0ZXJzVG9SZW1vdmUucHVzaCgnc2hvd01lYXN1cmVSYWNlRmlsdGVyJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdzaG93TG9jYWxSYWNlRmlsdGVyJzpcbiAgICAgICAgICBjb250YWluc0F0TGVhc3RPbmVSYWNlRmlsdGVyID0gdHJ1ZTtcbiAgICAgICAgICByYWNlRmlsdGVyQ291bnQgKz0gMTtcbiAgICAgICAgICBpZiAobGFzdEZpbHRlckFkZGVkICYmICFfLmlzRXF1YWwobGFzdEZpbHRlckFkZGVkLCAnc2hvd0xvY2FsUmFjZUZpbHRlcicpKSB7XG4gICAgICAgICAgICByYWNlRmlsdGVyQ291bnQgKz0gMTtcbiAgICAgICAgICAgIGZpbHRlcnNUb1JlbW92ZS5wdXNoKCdzaG93TG9jYWxSYWNlRmlsdGVyJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIGNvbnNvbGUubG9nKCdTZXR0aW5nc0FkZEJhbGxvdEl0ZW1zRmlsdGVyLCBmaWx0ZXJzVG9SZW1vdmU6JywgZmlsdGVyc1RvUmVtb3ZlKTtcbiAgICBpZiAoIWNvbnRhaW5zQXRMZWFzdE9uZVJhY2VGaWx0ZXIpIHtcbiAgICAgIC8vIFdlIGFsd2F5cyB3YW50IHRvIG1ha2Ugc3VyZSB0aGVyZSBpcyBhdCBsZWFzdCBvbiByYWNlIGZpbHRlciBvblxuICAgICAgc2VsZWN0ZWRGaWx0ZXJzLnB1c2goJ3Nob3dGZWRlcmFsUmFjZUZpbHRlcicpO1xuICAgICAgdGhpcy50b2dnbGVGaWx0ZXIoJ3Nob3dGZWRlcmFsUmFjZUZpbHRlcicpO1xuICAgICAgLy8gY29uc29sZS5sb2coJ0V4aXRpbmcgZ2V0TmV3RmlsdGVyZWRJdGVtcyAoMikgLSB0aGlzLnRvZ2dsZUZpbHRlcihcXCdzaG93RmVkZXJhbFJhY2VGaWx0ZXJcXCcpOycpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBpZiAocmFjZUZpbHRlckNvdW50ID4gMSkge1xuICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHN1cHBvcnQgb25lIHJhY2VGaWx0ZXIgYXQgYSB0aW1lLCBiZWNhdXNlIG90aGVyd2lzZSB0aGVyZSBhcmUgdG9vIG1hbnkgaXRlbXMgdG8gcmVuZGVyXG4gICAgICAvLyBjb25zb2xlLmxvZygnU2V0dGluZ3NBZGRCYWxsb3RJdGVtc0ZpbHRlciwgcmFjZUZpbHRlckNvdW50ID4gMSBmaWx0ZXJzVG9SZW1vdmU6JywgZmlsdGVyc1RvUmVtb3ZlKTtcbiAgICAgIHRoaXMucmVtb3ZlVGhlc2VGaWx0ZXJzKGZpbHRlcnNUb1JlbW92ZSk7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgLy8gTm93IGxpbWl0IHRvIG9uZSBraW5kIG9mIHJhY2UgbGV2ZWxcbiAgICBpZiAoY29udGFpbnNBdExlYXN0T25lUmFjZUZpbHRlcikge1xuICAgICAgLy8gY29uc29sZS5sb2coJ0FmdGVyIGNvbnRhaW5zQXRMZWFzdE9uZVJhY2VGaWx0ZXIsIGZpbHRlcmVkSXRlbXM6JywgZmlsdGVyZWRJdGVtcyk7XG4gICAgICBmaWx0ZXJJdGVtc1NuYXBzaG90ID0gZmlsdGVyZWRJdGVtcztcbiAgICAgIGZpbHRlcmVkSXRlbXMgPSBbXTtcbiAgICAgIHNlbGVjdGVkRmlsdGVycy5mb3JFYWNoKChmaWx0ZXIpID0+IHtcbiAgICAgICAgc3dpdGNoIChmaWx0ZXIpIHtcbiAgICAgICAgICBjYXNlICdzaG93RmVkZXJhbFJhY2VGaWx0ZXInOlxuICAgICAgICAgICAgZmlsdGVyZWRJdGVtcyA9IFsuLi5maWx0ZXJlZEl0ZW1zLCAuLi5maWx0ZXJJdGVtc1NuYXBzaG90LmZpbHRlcihpdGVtID0+IGl0ZW0ucmFjZV9vZmZpY2VfbGV2ZWwgPT09ICdGZWRlcmFsJyldO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnc2hvd1N0YXRlUmFjZUZpbHRlcic6XG4gICAgICAgICAgICBmaWx0ZXJlZEl0ZW1zID0gWy4uLmZpbHRlcmVkSXRlbXMsIC4uLmZpbHRlckl0ZW1zU25hcHNob3QuZmlsdGVyKGl0ZW0gPT4gaXRlbS5yYWNlX29mZmljZV9sZXZlbCA9PT0gJ1N0YXRlJyldO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnc2hvd01lYXN1cmVSYWNlRmlsdGVyJzpcbiAgICAgICAgICAgIGZpbHRlcmVkSXRlbXMgPSBbLi4uZmlsdGVyZWRJdGVtcywgLi4uZmlsdGVySXRlbXNTbmFwc2hvdC5maWx0ZXIoaXRlbSA9PiBpdGVtLmtpbmRfb2ZfYmFsbG90X2l0ZW0gPT09ICdNRUFTVVJFJyldO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSAnc2hvd0xvY2FsUmFjZUZpbHRlcic6XG4gICAgICAgICAgICBmaWx0ZXJlZEl0ZW1zID0gWy4uLmZpbHRlcmVkSXRlbXMsIC4uLmZpbHRlckl0ZW1zU25hcHNob3QuZmlsdGVyKGl0ZW0gPT4gaXRlbS5yYWNlX29mZmljZV9sZXZlbCA9PT0gJ0xvY2FsJyldO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBDb21tZW50IG9yIG5vIGNvbW1lbnQ/XG4gICAgbGV0IGNvbnRhaW5zQ29tbWVudEZpbHRlciA9IGZhbHNlO1xuICAgIHNlbGVjdGVkRmlsdGVycy5mb3JFYWNoKChmaWx0ZXIpID0+IHtcbiAgICAgIHN3aXRjaCAoZmlsdGVyKSB7XG4gICAgICAgIGNhc2UgJ3Nob3dDb21tZW50RmlsdGVyJzpcbiAgICAgICAgICBjb250YWluc0NvbW1lbnRGaWx0ZXIgPSB0cnVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChjb250YWluc0NvbW1lbnRGaWx0ZXIpIHtcbiAgICAgIGNvbnN0IGZpbHRlckl0ZW1zQ29tbWVudFNuYXBzaG90ID0gZmlsdGVyZWRJdGVtcztcbiAgICAgIGZpbHRlcmVkSXRlbXMgPSBbXTtcbiAgICAgIHNlbGVjdGVkRmlsdGVycy5mb3JFYWNoKChmaWx0ZXIpID0+IHtcbiAgICAgICAgc3dpdGNoIChmaWx0ZXIpIHtcbiAgICAgICAgICBjYXNlICdzaG93Q29tbWVudEZpbHRlcic6XG4gICAgICAgICAgICBmaWx0ZXJlZEl0ZW1zID0gWy4uLmZpbHRlcmVkSXRlbXMsIC4uLmZpbHRlckl0ZW1zQ29tbWVudFNuYXBzaG90LmZpbHRlcihpdGVtID0+IGl0ZW0uc3RhdGVtZW50X3RleHQgJiYgaXRlbS5zdGF0ZW1lbnRfdGV4dC5sZW5ndGgpXTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFNvcnQgT3JkZXJcbiAgICAvLyBzZWxlY3RlZEZpbHRlcnMuZm9yRWFjaCgoZmlsdGVyKSA9PiB7XG4gICAgLy8gICBzd2l0Y2ggKGZpbHRlcikge1xuICAgIC8vICAgICBjYXNlICdzb3J0QnlSZWFjaCc6XG4gICAgLy8gICAgICAgLy8gUHV0IHdyaXR0ZW4gY29tbWVudHMgb24gdG9wLCBhbmQgdGhlbiB3aXRoaW4gdGhvc2UgdHdvIHNlcGFyYXRpb25zLCBtb3ZlIFR3aXR0ZXIgZm9sbG93ZXJzIHRvIHRoZSB0b3BcbiAgICAvLyAgICAgICBmaWx0ZXJlZEl0ZW1zID0gZmlsdGVyZWRJdGVtcy5zb3J0KHRoaXMub3JkZXJCeVR3aXR0ZXJGb2xsb3dlcnMpO1xuICAgIC8vICAgICAgIGZpbHRlcmVkSXRlbXMgPSBmaWx0ZXJlZEl0ZW1zLnNvcnQodGhpcy5vcmRlckJ5V3JpdHRlbkNvbW1lbnQpO1xuICAgIC8vICAgICAgIGJyZWFrO1xuICAgIC8vICAgICBjYXNlICdzb3J0QnlOZXR3b3JrJzpcbiAgICAvLyAgICAgICBmaWx0ZXJlZEl0ZW1zID0gZmlsdGVyZWRJdGVtcy5zb3J0KHRoaXMub3JkZXJCeVR3aXR0ZXJGb2xsb3dlcnMpO1xuICAgIC8vICAgICAgIGZpbHRlcmVkSXRlbXMgPSBmaWx0ZXJlZEl0ZW1zLnNvcnQodGhpcy5vcmRlckJ5V3JpdHRlbkNvbW1lbnQpO1xuICAgIC8vICAgICAgIGZpbHRlcmVkSXRlbXMgPSBmaWx0ZXJlZEl0ZW1zLnNvcnQodGhpcy5vcmRlckJ5Rm9sbG93ZWRPcmdzRmlyc3QpO1xuICAgIC8vICAgICAgIGJyZWFrO1xuICAgIC8vICAgICBkZWZhdWx0OlxuICAgIC8vICAgICAgIGlmICh0eXBlb2YgZmlsdGVyID09PSAnb2JqZWN0Jykge1xuICAgIC8vICAgICAgICAgZmlsdGVyZWRJdGVtcyA9IFsuLi5maWx0ZXJlZEl0ZW1zLCAuLi50aGlzLmdldEZpbHRlcmVkSXRlbXNCeUxpbmtlZElzc3VlKGZpbHRlcildO1xuICAgIC8vICAgICAgIH1cbiAgICAvLyAgICAgICBicmVhaztcbiAgICAvLyAgIH1cbiAgICAvLyB9KTtcblxuICAgIC8vIFRVUk5FRCBPRkY6IE1ha2Ugc3VyZSBlYWNoIGl0ZW0gaW4gdGhlIGZpbHRlcmVkSXRlbXMgaXMgdW5pcXVlIChieSB3ZV92b3RlX2lkKVxuICAgIC8vIHJldHVybiBfLnVuaXFCeShmaWx0ZXJlZEl0ZW1zLCB4ID0+IHgud2Vfdm90ZV9pZCk7XG5cbiAgICAvLyBXZSBubyBsb25nZXIgZmlsdGVyIGZvciBhIHVuaXF1ZSB3ZV92b3RlX2lkIGJlY2F1c2Ugd2Ugc29tZXRpbWVzIHBhc3MgaXRlbXMgaW50byB0aGlzIHJvdXRpbmUgdGhhdCBkb24ndCBoYXZlIGEgd2Vfdm90ZV9pZFxuICAgIC8vIGNvbnNvbGUubG9nKCdmaWx0ZXJlZEl0ZW1zOicsIGZpbHRlcmVkSXRlbXMpO1xuICAgIHJldHVybiBmaWx0ZXJlZEl0ZW1zO1xuICB9O1xuXG4gIHJlbW92ZVRoZXNlRmlsdGVycyA9IChmaWx0ZXJMaXN0VG9SZW1vdmUpID0+IHtcbiAgICAvLyBSZW1vdmUgdGhlIGl0ZW1zIGluIGZpbHRlckxpc3QgdGhhdCBhcmUgY3VycmVudGx5IGluIHNlbGVjdGVkRmlsdGVyc1xuICAgIC8vIGNvbnNvbGUubG9nKCdTZXR0aW5nc0FkZEJhbGxvdEl0ZW1zRmlsdGVyLCByZW1vdmVUaGVzZUZpbHRlcnMgZmlsdGVyTGlzdFRvUmVtb3ZlOicsIGZpbHRlckxpc3RUb1JlbW92ZSk7XG4gICAgY29uc3QgbmV3RmlsdGVyZWRJdGVtcyA9IHRoaXMucHJvcHMuc2VsZWN0ZWRGaWx0ZXJzLmZpbHRlcihvbmVJdGVtID0+ICFmaWx0ZXJMaXN0VG9SZW1vdmUuaW5jbHVkZXMob25lSXRlbSkpO1xuICAgIHRoaXMucHJvcHMudXBkYXRlU2VsZWN0ZWRGaWx0ZXJzKG5ld0ZpbHRlcmVkSXRlbXMpO1xuICB9O1xuXG4gIHRvZ2dsZUZpbHRlciA9IChmaWx0ZXJOYW1lKSA9PiB7XG4gICAgdGhpcy5wcm9wcy5vblRvZ2dsZUZpbHRlcihmaWx0ZXJOYW1lKTtcbiAgfTtcblxuICBzZWxlY3RTb3J0QnlGaWx0ZXIgPSAobmFtZSkgPT4ge1xuICAgIHRoaXMucHJvcHMub25TZWxlY3RTb3J0QnlGaWx0ZXIobmFtZSk7XG4gIH07XG5cbiAgLy8gZ2V0U3R5bGVzKG5hbWUsIHBlcnNvbk5hbWUsIHRoZW1lKSB7XG4gIC8vICAgcmV0dXJuIHtcbiAgLy8gICAgIGZvbnRXZWlnaHQ6XG4gIC8vICAgICAgIHBlcnNvbk5hbWUuaW5kZXhPZihuYW1lKSA9PT0gLTFcbiAgLy8gICAgICAgICA/IHRoZW1lLnR5cG9ncmFwaHkuZm9udFdlaWdodFJlZ3VsYXJcbiAgLy8gICAgICAgICA6IHRoZW1lLnR5cG9ncmFwaHkuZm9udFdlaWdodE1lZGl1bSxcbiAgLy8gICB9O1xuICAvLyB9XG5cbiAgb25TZWxlY3RlZFN0YXRlc0NoYW5nZSA9IChldmVudCwgaW5kZXgpID0+IHtcbiAgICBjb25zdCB7IHNlbGVjdGVkRmlsdGVycyB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7IHNlbGVjdGVkU3RhdGVzOiBwcmlvclZhbHVlcyB9ID0gdGhpcy5zdGF0ZTtcbiAgICBjb25zdCBuZXdWYWx1ZSA9IGluZGV4LmtleTtcbiAgICAvLyBjb25zb2xlLmxvZygnb25TZWxlY3RlZFN0YXRlc0NoYW5nZSBuZXdWYWx1ZTonLCBuZXdWYWx1ZSk7XG4gICAgaWYgKG5ld1ZhbHVlKSB7XG4gICAgICBsZXQgbmV3U2VsZWN0ZWRGaWx0ZXJzID0gW107XG4gICAgICBpZiAoYXJyYXlDb250YWlucyhuZXdWYWx1ZSwgcHJpb3JWYWx1ZXMpKSB7XG4gICAgICAgIC8vIFJlbW92ZSBuZXdWYWx1ZVxuICAgICAgICBjb25zdCBuZXdWYWx1ZXMgPSByZW1vdmVWYWx1ZUZyb21BcnJheShwcmlvclZhbHVlcywgbmV3VmFsdWUpO1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICBzZWxlY3RlZFN0YXRlczogbmV3VmFsdWVzLFxuICAgICAgICB9KTtcbiAgICAgICAgLy8gQW5kIGZpbmFsbHksIGVuZCBieSByZXNldHRpbmcgYWxsIGZpbHRlcnMgaW4gRmlsdGVyQmFzZSB3aXRoIHRoZSB1cGRhdGVkIHNldFxuICAgICAgICBuZXdTZWxlY3RlZEZpbHRlcnMgPSByZW1vdmVWYWx1ZUZyb21BcnJheShzZWxlY3RlZEZpbHRlcnMsIG5ld1ZhbHVlKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ29uU2VsZWN0ZWRTdGF0ZXNDaGFuZ2UsIFJFTU9WRSBzZWxlY3RlZEZpbHRlcnM6JywgbmV3U2VsZWN0ZWRGaWx0ZXJzKTtcbiAgICAgICAgdGhpcy5wcm9wcy51cGRhdGVTZWxlY3RlZEZpbHRlcnMobmV3U2VsZWN0ZWRGaWx0ZXJzKTtcbiAgICAgICAgdGhpcy5wcm9wcy5mb3JjZUNoYW5nZVRyaWdnZXIoJ1JFTU9WRS1TVEFURScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQWRkIG5ld1ZhbHVlXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xuICAgICAgICAgIHNlbGVjdGVkU3RhdGVzOiBbLi4ucHJpb3JWYWx1ZXMsIG5ld1ZhbHVlXSxcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEFuZCBmaW5hbGx5LCBlbmQgYnkgcmVzZXR0aW5nIGFsbCBmaWx0ZXJzIGluIEZpbHRlckJhc2Ugd2l0aCB0aGUgdXBkYXRlZCBzZXRcbiAgICAgICAgc2VsZWN0ZWRGaWx0ZXJzLnB1c2gobmV3VmFsdWUpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnb25TZWxlY3RlZFN0YXRlc0NoYW5nZSwgQUREIG5ldyBzZWxlY3RlZEZpbHRlcnM6Jywgc2VsZWN0ZWRGaWx0ZXJzKTtcbiAgICAgICAgdGhpcy5wcm9wcy51cGRhdGVTZWxlY3RlZEZpbHRlcnMoc2VsZWN0ZWRGaWx0ZXJzKTtcbiAgICAgICAgdGhpcy5wcm9wcy5mb3JjZUNoYW5nZVRyaWdnZXIoJ0FERC1TVEFURScpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICByZW5kZXIgKCkge1xuICAgIHJlbmRlckxvZygnU2V0dGluZ3NBZGRCYWxsb3RJdGVtc0ZpbHRlcicpOyAgLy8gU2V0IExPR19SRU5ERVJfRVZFTlRTIHRvIGxvZyBhbGwgcmVuZGVyc1xuICAgIGNvbnN0IHsgY2xhc3Nlcywgc2hvd0FsbEZpbHRlcnMsIHNlbGVjdGVkRmlsdGVycyB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7IHNlbGVjdGVkU3RhdGVzIH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgLy8gY29uc29sZS5sb2coJ3NlbGVjdGVkU3RhdGVzOicsIHNlbGVjdGVkU3RhdGVzKTtcbiAgICAvLyBjb25zb2xlLmxvZygnc3RhdGVDb2RlTWFwOicsIHN0YXRlQ29kZU1hcCk7XG4gICAgY29uc3Qgc3RhdGVOYW1lTGlzdCA9IE9iamVjdC52YWx1ZXMoc3RhdGVDb2RlTWFwKTtcbiAgICAvLyBjb25zb2xlLmxvZygnc3RhdGVOYW1lTGlzdDonLCBzdGF0ZU5hbWVMaXN0KTtcbiAgICBsZXQgc3RhdGVBbHJlYWR5U2VsZWN0ZWQgPSBmYWxzZTtcbiAgICBsZXQgdGVtcFN0YXRlQ29kZSA9ICcnO1xuICAgIGxldCB0ZW1wU3RhdGVOYW1lID0gJyc7XG4gICAgcmV0dXJuIChcbiAgICAgIDxXcmFwcGVyIHNob3dBbGxGaWx0ZXJzPXtzaG93QWxsRmlsdGVyc30+XG4gICAgICAgIDxGaWx0ZXJSb3c+XG4gICAgICAgICAgPEZpbHRlckNvbHVtbj5cbiAgICAgICAgICAgIDxiPkJhbGxvdCBJdGVtIFR5cGU8L2I+XG4gICAgICAgICAgICA8Rm9ybUNvbnRyb2xMYWJlbFxuICAgICAgICAgICAgICBjbGFzc2VzPXt7IGxhYmVsOiBjbGFzc2VzLmZvcm1Db250cm9sTGFiZWwgfX1cbiAgICAgICAgICAgICAgY29udHJvbD17KFxuICAgICAgICAgICAgICAgIDxSYWRpb1xuICAgICAgICAgICAgICAgICAgY2hlY2tlZD17c2VsZWN0ZWRGaWx0ZXJzLmluZGV4T2YoJ3Nob3dGZWRlcmFsUmFjZUZpbHRlcicpID4gLTF9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gdGhpcy50b2dnbGVGaWx0ZXIoJ3Nob3dGZWRlcmFsUmFjZUZpbHRlcicpfVxuICAgICAgICAgICAgICAgICAgdmFsdWU9XCJzaG93RmVkZXJhbFJhY2VGaWx0ZXJcIlxuICAgICAgICAgICAgICAgICAgY29sb3I9XCJwcmltYXJ5XCJcbiAgICAgICAgICAgICAgICAvPlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICBsYWJlbD1cIkZlZGVyYWxcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxGb3JtQ29udHJvbExhYmVsXG4gICAgICAgICAgICAgIGNsYXNzZXM9e3sgbGFiZWw6IGNsYXNzZXMuZm9ybUNvbnRyb2xMYWJlbCB9fVxuICAgICAgICAgICAgICBjb250cm9sPXsoXG4gICAgICAgICAgICAgICAgPFJhZGlvXG4gICAgICAgICAgICAgICAgICBjaGVja2VkPXtzZWxlY3RlZEZpbHRlcnMuaW5kZXhPZignc2hvd1N0YXRlUmFjZUZpbHRlcicpID4gLTF9XG4gICAgICAgICAgICAgICAgICBvbkNoYW5nZT17KCkgPT4gdGhpcy50b2dnbGVGaWx0ZXIoJ3Nob3dTdGF0ZVJhY2VGaWx0ZXInKX1cbiAgICAgICAgICAgICAgICAgIHZhbHVlPVwic2hvd1N0YXRlUmFjZUZpbHRlclwiXG4gICAgICAgICAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIGxhYmVsPVwiU3RhdGVcIlxuICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDxGb3JtQ29udHJvbExhYmVsXG4gICAgICAgICAgICAgIGNsYXNzZXM9e3sgbGFiZWw6IGNsYXNzZXMuZm9ybUNvbnRyb2xMYWJlbCB9fVxuICAgICAgICAgICAgICBjb250cm9sPXsoXG4gICAgICAgICAgICAgICAgPFJhZGlvXG4gICAgICAgICAgICAgICAgICBjaGVja2VkPXtzZWxlY3RlZEZpbHRlcnMuaW5kZXhPZignc2hvd01lYXN1cmVSYWNlRmlsdGVyJykgPiAtMX1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiB0aGlzLnRvZ2dsZUZpbHRlcignc2hvd01lYXN1cmVSYWNlRmlsdGVyJyl9XG4gICAgICAgICAgICAgICAgICB2YWx1ZT1cInNob3dNZWFzdXJlUmFjZUZpbHRlclwiXG4gICAgICAgICAgICAgICAgICBjb2xvcj1cInByaW1hcnlcIlxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgIGxhYmVsPVwiTWVhc3VyZVwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgPEZvcm1Db250cm9sTGFiZWxcbiAgICAgICAgICAgICAgY2xhc3Nlcz17eyBsYWJlbDogY2xhc3Nlcy5mb3JtQ29udHJvbExhYmVsIH19XG4gICAgICAgICAgICAgIGNvbnRyb2w9eyhcbiAgICAgICAgICAgICAgICA8UmFkaW9cbiAgICAgICAgICAgICAgICAgIGNoZWNrZWQ9e3NlbGVjdGVkRmlsdGVycy5pbmRleE9mKCdzaG93TG9jYWxSYWNlRmlsdGVyJykgPiAtMX1cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiB0aGlzLnRvZ2dsZUZpbHRlcignc2hvd0xvY2FsUmFjZUZpbHRlcicpfVxuICAgICAgICAgICAgICAgICAgdmFsdWU9XCJzaG93TG9jYWxSYWNlRmlsdGVyXCJcbiAgICAgICAgICAgICAgICAgIGNvbG9yPVwicHJpbWFyeVwiXG4gICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgbGFiZWw9XCJMb2NhbFwiXG4gICAgICAgICAgICAvPlxuICAgICAgICAgIDwvRmlsdGVyQ29sdW1uPlxuICAgICAgICAgIDxGaWx0ZXJDb2x1bW4+XG4gICAgICAgICAgICA8Yj5TdGF0ZShzKTwvYj5cbiAgICAgICAgICAgIDxGb3JtQ29udHJvbExhYmVsXG4gICAgICAgICAgICAgIGNsYXNzZXM9e3sgbGFiZWw6IGNsYXNzZXMuZm9ybUNvbnRyb2xMYWJlbCB9fVxuICAgICAgICAgICAgICBjb250cm9sPXsoXG4gICAgICAgICAgICAgICAgPFNlbGVjdFxuICAgICAgICAgICAgICAgICAgbXVsdGlwbGVcbiAgICAgICAgICAgICAgICAgIHZhbHVlPXtzZWxlY3RlZFN0YXRlc31cbiAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXt0aGlzLm9uU2VsZWN0ZWRTdGF0ZXNDaGFuZ2V9XG4gICAgICAgICAgICAgICAgICBpbnB1dD17PElucHV0IGlkPVwic2VsZWN0LW11bHRpcGxlLWNoaXBcIiAvPn1cbiAgICAgICAgICAgICAgICAgIHJlbmRlclZhbHVlPXsoKSA9PiAoXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPXtjbGFzc2VzLmNoaXBzfT5cbiAgICAgICAgICAgICAgICAgICAgICB7c2VsZWN0ZWRTdGF0ZXMubWFwKCh0aGlzU3RhdGVDb2RlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wU3RhdGVOYW1lID0gY29udmVydFN0YXRlQ29kZVRvU3RhdGVUZXh0KHRoaXNTdGF0ZUNvZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RoaXNTdGF0ZUNvZGU6JywgdGhpc1N0YXRlQ29kZSwgJywgdGVtcFN0YXRlTmFtZTonLCB0ZW1wU3RhdGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiA8Q2hpcCBrZXk9e3RoaXNTdGF0ZUNvZGV9IGxhYmVsPXt0ZW1wU3RhdGVOYW1lfSBjbGFzc05hbWU9e2NsYXNzZXMuY2hpcH0gY29tcG9uZW50PVwiZGl2XCIgLz47XG4gICAgICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgIE1lbnVQcm9wcz17TWVudVByb3BzfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgIHtzdGF0ZU5hbWVMaXN0Lm1hcCgoc3RhdGVOYW1lKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRlbXBTdGF0ZUNvZGUgPSBjb252ZXJ0U3RhdGVUZXh0VG9TdGF0ZUNvZGUoc3RhdGVOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGVBbHJlYWR5U2VsZWN0ZWQgPSBhcnJheUNvbnRhaW5zKHRlbXBTdGF0ZUNvZGUsIHNlbGVjdGVkU3RhdGVzKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3RlbXBTdGF0ZUNvZGU6JywgdGVtcFN0YXRlQ29kZSwgJywgc3RhdGVBbHJlYWR5U2VsZWN0ZWQ6Jywgc3RhdGVBbHJlYWR5U2VsZWN0ZWQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgICAgICAgICAgIDxNZW51SXRlbSBrZXk9e3RlbXBTdGF0ZUNvZGV9IHZhbHVlPXt0ZW1wU3RhdGVDb2RlfT5cbiAgICAgICAgICAgICAgICAgICAgICAgIHtzdGF0ZUFscmVhZHlTZWxlY3RlZCA/IDxzdHJvbmc+e3N0YXRlTmFtZX08L3N0cm9uZz4gOiA8c3Bhbj57c3RhdGVOYW1lfTwvc3Bhbj59XG4gICAgICAgICAgICAgICAgICAgICAgPC9NZW51SXRlbT5cbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgICAgIDwvU2VsZWN0PlxuICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0ZpbHRlckNvbHVtbj5cbiAgICAgICAgPC9GaWx0ZXJSb3c+XG4gICAgICA8L1dyYXBwZXI+XG4gICAgKTtcbiAgfVxufVxuXG5jb25zdCBzdHlsZXMgPSB0aGVtZSA9PiAoe1xuICBmb3JtQ29udHJvbExhYmVsOiB7XG4gICAgW3RoZW1lLmJyZWFrcG9pbnRzLmRvd24oJ2xnJyldOiB7XG4gICAgICBmb250U2l6ZTogMTQsXG4gICAgfSxcbiAgfSxcbiAgY2hpcHM6IHtcbiAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgZmxleFdyYXA6ICd3cmFwJyxcbiAgfSxcbiAgY2hpcDoge1xuICAgIG1hcmdpbjogMixcbiAgfSxcbiAgbm9MYWJlbDoge1xuICAgIG1hcmdpblRvcDogdGhlbWUuc3BhY2luZygzKSxcbiAgfSxcbn0pO1xuXG5jb25zdCBXcmFwcGVyID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogJHsoeyBzaG93QWxsRmlsdGVycyB9KSA9PiAoc2hvd0FsbEZpbHRlcnMgPyAnZmxleCcgOiAnbm9uZScpfTtcbiAgZmxleC1mbG93OiBjb2x1bW47XG4gIHBhZGRpbmctdG9wOiAxcmVtO1xuYDtcblxuY29uc3QgRmlsdGVyUm93ID0gc3R5bGVkLmRpdmBcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1mbG93OiByb3c7XG5gO1xuXG5jb25zdCBGaWx0ZXJDb2x1bW4gPSBzdHlsZWQuZGl2YFxuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWZsb3c6IGNvbHVtbjtcbiAgbWFyZ2luLXJpZ2h0OiAycmVtO1xuYDtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aFN0eWxlcyhzdHlsZXMpKFNldHRpbmdzQWRkQmFsbG90SXRlbXNGaWx0ZXIpO1xuIl19*/